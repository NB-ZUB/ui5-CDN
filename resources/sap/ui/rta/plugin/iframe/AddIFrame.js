/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Lib","sap/ui/rta/plugin/BaseCreate","sap/ui/fl/Utils","sap/ui/dt/Util","sap/base/util/uid","sap/ui/core/IconPool","sap/ui/rta/plugin/iframe/AddIFrameDialog"],function(e,t,a,i,r,n,s){"use strict";function o(e,t,a,i){var r=!e;var n=this.getCreateAction(r,i,e);return a.getText(t,[n.text])}function g(e,t,i,n){var s=a.getViewForControl(e);var o=s.createId(r());var g;var d;if(t.frameWidth){g=t.frameWidth+t.frameWidthUnit}else{g="100%"}if(t.frameHeight){d=t.frameHeight+t.frameHeightUnit}else{d="100%"}return this.getCommandFactory().getCommandFor(e,"addIFrame",{targetAggregation:t.aggregation,baseId:o,index:t.index,url:t.frameUrl,width:g,height:d,title:t.title,useLegacyNavigation:t.useLegacyNavigation},i,n)}function d(e,t){var a=t[0];var r=!e;var n=this.getCreateAction(r,a,e);var o=this._getParentOverlay(r,a);var d=o.getElement();var c=o.getDesignTimeMetadata();var l=0;if(r){var u=a.getElement();var h=c.getAggregation(n.aggregation).getIndex;l=this._determineIndex(d,u,n.aggregation,h)}var f=this.getVariantManagementReference(o);var m=!!n.getCreatedContainerId;var v=new s;var p;s.buildUrlBuilderParametersFor(d).then(function(e){var t={parameters:e,asContainer:m};return v.open(t)}).then(function(e){if(!e){return Promise.reject()}e.index=l;e.aggregation=n.aggregation;p=e.title;return g.call(this,d,e,c,f)}.bind(this)).then(function(e){this.fireElementModified({command:e,newControlId:e.getBaseId(),action:m?n:undefined,title:p})}.bind(this)).catch(function(e){if(e){throw i.createError("AddIFrame#handler",e,"sap.ui.rta")}})}var c=t.extend("sap.ui.rta.plugin.AddIFrame",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});c.prototype.isEnabled=function(e,t){var a=t[0];var i=!e;var r=this.getCreateAction(i,a,e);return this.isActionEnabled(r,i,a)};c.prototype.getMenuItems=async function(t){function a(t){var a=e.getResourceBundleFor("sap.ui.rta");var i=a.getText("CTX_ADDIFRAME_GROUP");return{text:o.bind(this,t,"CTX_ADDIFRAME",a),handler:d.bind(this,t),enabled:this.isEnabled.bind(this,t),isSibling:!t,icon:"sap-icon://tnt/content-enricher",group:i}}n.registerFont({collectionName:"tnt",fontFamily:"SAP-icons-TNT",fontURI:sap.ui.require.toUrl("sap/tnt/themes/base/fonts"),lazy:false});await n.fontLoaded("tnt");var i=140;var r=[];var s=true;if(this.isAvailable(t,s)){var g=this.getCreateAction(s,t[0]);if(g){var c=Object.assign({id:"CTX_CREATE_SIBLING_IFRAME",rank:i,action:g},a.call(this));r.push(this.enhanceItemWithResponsibleElement(c,t));i+=10}}s=false;if(this.isAvailable(t,s)){r=r.concat(this.getCreateActions(s,t[0]).map(function(e,r){var n=Object.assign({action:e,id:`CTX_CREATE_CHILD_IFRAME_${e.aggregation.toUpperCase()}`,rank:i+10*r},a.call(this,e.aggregation));return this.enhanceItemWithResponsibleElement(n,t)},this))}return r};c.prototype.getActionName=function(){return"addIFrame"};return c});
//# sourceMappingURL=AddIFrame.js.map